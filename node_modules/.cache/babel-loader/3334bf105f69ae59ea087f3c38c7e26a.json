{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$(),\n    _s7 = $RefreshSig$(),\n    _s8 = $RefreshSig$(),\n    _s9 = $RefreshSig$(),\n    _s10 = $RefreshSig$(),\n    _s11 = $RefreshSig$();\n\nimport { useEffect, useMemo } from 'react'; // import axios from 'axios'\n\nimport { useSelector } from 'react-redux';\nimport { useAppDispatch } from 'state';\nimport { useWeb3React } from '@web3-react/core';\nimport BigNumber from 'bignumber.js';\nimport { BIG_ZERO } from 'utils/bigNumber';\nimport { getBalanceAmount } from 'utils/formatBalance';\nimport { farmsConfig } from 'config/constants';\nimport useRefresh from 'hooks/useRefresh';\nimport { fetchFarmsPublicDataAsync, fetchFarmUserDataAsync, nonArchivedFarms } from '.';\nexport const usePollFarmsData = (includeArchive = false) => {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const {\n    slowRefresh\n  } = useRefresh();\n  const {\n    account\n  } = useWeb3React();\n  useEffect(() => {\n    const farmsToFetch = includeArchive ? farmsConfig : nonArchivedFarms;\n    const pids = farmsToFetch.map(farmToFetch => farmToFetch.pid);\n    dispatch(fetchFarmsPublicDataAsync(pids));\n\n    if (account) {\n      dispatch(fetchFarmUserDataAsync({\n        account,\n        pids\n      }));\n    }\n  }, [includeArchive, dispatch, slowRefresh, account]);\n};\n/**\r\n * Fetches the \"core\" farm data used globally\r\n * 2 = LOKI-BNB LP\r\n * 3 = BUSD-BNB LP\r\n */\n\n_s(usePollFarmsData, \"GA0abdQx+3VL0XheKTRFc99Dfws=\", false, function () {\n  return [useAppDispatch, useRefresh, useWeb3React];\n});\n\nexport const usePollCoreFarmData = () => {\n  _s2();\n\n  const dispatch = useAppDispatch();\n  const {\n    fastRefresh\n  } = useRefresh();\n  useEffect(() => {\n    dispatch(fetchFarmsPublicDataAsync([2, 3]));\n  }, [dispatch, fastRefresh]);\n};\n\n_s2(usePollCoreFarmData, \"ioW+pQi/3pF1VdJGlRLsvLuQtVc=\", false, function () {\n  return [useAppDispatch, useRefresh];\n});\n\nexport const useFarms = () => {\n  _s3();\n\n  const farms = useSelector(state => state.farms);\n  return farms;\n};\n\n_s3(useFarms, \"40tjDYBLbzKzCIdd0cwm+UIfe9E=\", false, function () {\n  return [useSelector];\n});\n\nexport const useFarmFromPid = pid => {\n  _s4();\n\n  const farm = useSelector(state => state.farms.data.find(f => f.pid === pid));\n  return farm;\n};\n\n_s4(useFarmFromPid, \"TOdL9+Oz8AEj+wmjEA7Olv/caxU=\", false, function () {\n  return [useSelector];\n});\n\nexport const useFarmFromLpSymbol = lpSymbol => {\n  _s5();\n\n  const farm = useSelector(state => state.farms.data.find(f => f.lpSymbol === lpSymbol));\n  return farm;\n};\n\n_s5(useFarmFromLpSymbol, \"TOdL9+Oz8AEj+wmjEA7Olv/caxU=\", false, function () {\n  return [useSelector];\n});\n\nexport const useFarmUser = pid => {\n  _s6();\n\n  const farm = useFarmFromPid(pid);\n  return {\n    allowance: farm.userData ? new BigNumber(farm.userData.allowance) : BIG_ZERO,\n    tokenBalance: farm.userData ? new BigNumber(farm.userData.tokenBalance) : BIG_ZERO,\n    stakedBalance: farm.userData ? new BigNumber(farm.userData.stakedBalance) : BIG_ZERO,\n    earnings: farm.userData ? new BigNumber(farm.userData.earnings) : BIG_ZERO\n  };\n}; // Return the base token price for a farm, from a given pid\n\n_s6(useFarmUser, \"kxbBDHm0i5EJweIp+RPzOgw8PRU=\", false, function () {\n  return [useFarmFromPid];\n});\n\nexport const useBusdPriceFromPid = pid => {\n  _s7();\n\n  const farm = useFarmFromPid(pid);\n  return farm && new BigNumber(farm.token.busdPrice);\n};\n\n_s7(useBusdPriceFromPid, \"kxbBDHm0i5EJweIp+RPzOgw8PRU=\", false, function () {\n  return [useFarmFromPid];\n});\n\nexport const useLpTokenPrice = (symbol, isTokenOnly) => {\n  _s8();\n\n  const farm = useFarmFromLpSymbol(symbol);\n  const farmTokenPriceInUsd = useBusdPriceFromPid(farm.pid);\n  let lpTokenPrice = BIG_ZERO;\n\n  if (farm.lpTotalSupply && farm.lpTotalInQuoteToken) {\n    // Total value of base token in LP\n    const valueOfBaseTokenInFarm = farmTokenPriceInUsd.times(farm.tokenAmountTotal); // Double it to get overall value in LP\n\n    const overallValueOfAllTokensInFarm = valueOfBaseTokenInFarm.times(2); // Divide total value of all tokens, by the number of LP tokens\n\n    const totalLpTokens = getBalanceAmount(new BigNumber(farm.lpTotalSupply));\n    lpTokenPrice = isTokenOnly ? new BigNumber(farm.token.busdPrice) : overallValueOfAllTokensInFarm.div(totalLpTokens);\n  }\n\n  return lpTokenPrice;\n}; // /!\\ Deprecated , use the BUSD hook in /hooks\n\n_s8(useLpTokenPrice, \"+hyoswFTXS+XugOwGpb7EaPFmo4=\", false, function () {\n  return [useFarmFromLpSymbol, useBusdPriceFromPid];\n});\n\nexport const usePriceBnbBusd = () => {\n  _s9();\n\n  const bnbBusdFarm = useFarmFromPid(3);\n  return new BigNumber(bnbBusdFarm.quoteToken.busdPrice);\n};\n\n_s9(usePriceBnbBusd, \"bjYi8xZd8XQhAOGMAQ3jqbWQ3+Y=\", false, function () {\n  return [useFarmFromPid];\n});\n\nexport const usePriceCakeBusd = () => {\n  _s10();\n\n  const cakeBnbFarm = useFarmFromPid(1);\n  const cakePriceBusdAsString = cakeBnbFarm.token.busdPrice;\n  const cakePriceBusd = useMemo(() => {\n    return new BigNumber(cakePriceBusdAsString);\n  }, [cakePriceBusdAsString]);\n  return cakePriceBusd;\n};\n\n_s10(usePriceCakeBusd, \"kcWwi+8tt05xa8Puqd+9ZW2RR2A=\", false, function () {\n  return [useFarmFromPid];\n});\n\nexport const useTotalValue = () => {\n  _s11();\n\n  const farms = useFarms();\n  let value = new BigNumber(0);\n\n  for (let i = 0; i < farms.data.length; i++) {\n    const farm = farms.data[i];\n\n    if (farm.lpTotalInQuoteToken && farm.lpTotalInQuoteToken !== '0') {\n      let val;\n\n      if (!farm.isTokenOnly) {\n        val = new BigNumber(farm.lpTotalInQuoteToken).times(farm.quoteToken.busdPrice);\n      } else {\n        val = new BigNumber(farm.lpTotalInQuoteToken).times(farm.token.busdPrice);\n      }\n\n      value = value.plus(val);\n    }\n  }\n\n  return value;\n}; // const useFetch = (url, options) => {\n//   const [data, setData] = React.useState({ response:null, route:null, ethereum: null, polyvertex:null, bitcoin:null});\n//   useEffect(() => {\n//     const fetchData = async () => {\n//       const result = await axios(\n//         url,\n//       );\n//       setData(result.data);\n//     };\n//     fetchData();\n//   }, [url]);\n//   const err = null;\n//   return {data, err};\n// };\n// export const usePriceWethBusd = (): BigNumber => {\n//   const url = \"https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd\"\n//   const { data, err} = useFetch(url, null);\n//   let output = new BigNumber(0);\n//   if(data.ethereum){\n//     output = new BigNumber(data.ethereum.usd);\n//   }\n//   return output;\n// }\n// export const usePriceBtcBusd = (): BigNumber => {\n//   const url = \"https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd\"\n//   const { data, err} = useFetch(url, null);\n//   let output = new BigNumber(0);\n//   if(data.bitcoin){\n//     output = new BigNumber(data.bitcoin.usd);\n//   }\n//   return output;\n// }\n// export const usePriceRouteBusd = (): BigNumber => {\n//   const url = \"https://api.coingecko.com/api/v3/simple/price?ids=route&vs_currencies=usd\"\n//   const { data, err} = useFetch(url, null);\n//   let output = new BigNumber(0);\n//   if(data.route){\n//     output = new BigNumber(data.route.usd);\n//   }\n//   return output;\n// }\n\n_s11(useTotalValue, \"hyV2ZRkJ6D7z8apk+PyH/0CPtd0=\", false, function () {\n  return [useFarms];\n});","map":{"version":3,"sources":["C:/Users/97154/swap/hami/LokiswapUI/src/state/farms/hooks.ts"],"names":["useEffect","useMemo","useSelector","useAppDispatch","useWeb3React","BigNumber","BIG_ZERO","getBalanceAmount","farmsConfig","useRefresh","fetchFarmsPublicDataAsync","fetchFarmUserDataAsync","nonArchivedFarms","usePollFarmsData","includeArchive","dispatch","slowRefresh","account","farmsToFetch","pids","map","farmToFetch","pid","usePollCoreFarmData","fastRefresh","useFarms","farms","state","useFarmFromPid","farm","data","find","f","useFarmFromLpSymbol","lpSymbol","useFarmUser","allowance","userData","tokenBalance","stakedBalance","earnings","useBusdPriceFromPid","token","busdPrice","useLpTokenPrice","symbol","isTokenOnly","farmTokenPriceInUsd","lpTokenPrice","lpTotalSupply","lpTotalInQuoteToken","valueOfBaseTokenInFarm","times","tokenAmountTotal","overallValueOfAllTokensInFarm","totalLpTokens","div","usePriceBnbBusd","bnbBusdFarm","quoteToken","usePriceCakeBusd","cakeBnbFarm","cakePriceBusdAsString","cakePriceBusd","useTotalValue","value","i","length","val","plus"],"mappings":";;;;;;;;;;;;AAAA,SAAgBA,SAAhB,EAA2BC,OAA3B,QAA0C,OAA1C,C,CACA;;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,cAAT,QAA+B,OAA/B;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,SAASC,QAAT,QAAyB,iBAAzB;AACA,SAASC,gBAAT,QAAiC,qBAAjC;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,yBAAT,EAAoCC,sBAApC,EAA4DC,gBAA5D,QAAoF,GAApF;AAGA,OAAO,MAAMC,gBAAgB,GAAG,CAACC,cAAc,GAAG,KAAlB,KAA4B;AAAA;;AAC1D,QAAMC,QAAQ,GAAGZ,cAAc,EAA/B;AACA,QAAM;AAAEa,IAAAA;AAAF,MAAkBP,UAAU,EAAlC;AACA,QAAM;AAAEQ,IAAAA;AAAF,MAAcb,YAAY,EAAhC;AAEAJ,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMkB,YAAY,GAAGJ,cAAc,GAAGN,WAAH,GAAiBI,gBAApD;AACA,UAAMO,IAAI,GAAGD,YAAY,CAACE,GAAb,CAAkBC,WAAD,IAAiBA,WAAW,CAACC,GAA9C,CAAb;AAEAP,IAAAA,QAAQ,CAACL,yBAAyB,CAACS,IAAD,CAA1B,CAAR;;AAEA,QAAIF,OAAJ,EAAa;AACXF,MAAAA,QAAQ,CAACJ,sBAAsB,CAAC;AAAEM,QAAAA,OAAF;AAAWE,QAAAA;AAAX,OAAD,CAAvB,CAAR;AACD;AACF,GATQ,EASN,CAACL,cAAD,EAAiBC,QAAjB,EAA2BC,WAA3B,EAAwCC,OAAxC,CATM,CAAT;AAUD,CAfM;AAiBP;AACA;AACA;AACA;AACA;;GArBaJ,gB;UACMV,c,EACOM,U,EACJL,Y;;;AAmBtB,OAAO,MAAMmB,mBAAmB,GAAG,MAAM;AAAA;;AACvC,QAAMR,QAAQ,GAAGZ,cAAc,EAA/B;AACA,QAAM;AAAEqB,IAAAA;AAAF,MAAkBf,UAAU,EAAlC;AAEAT,EAAAA,SAAS,CAAC,MAAM;AACde,IAAAA,QAAQ,CAACL,yBAAyB,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CAA1B,CAAR;AACD,GAFQ,EAEN,CAACK,QAAD,EAAWS,WAAX,CAFM,CAAT;AAGD,CAPM;;IAAMD,mB;UACMpB,c,EACOM,U;;;AAO1B,OAAO,MAAMgB,QAAQ,GAAG,MAAkB;AAAA;;AACxC,QAAMC,KAAK,GAAGxB,WAAW,CAAEyB,KAAD,IAAkBA,KAAK,CAACD,KAAzB,CAAzB;AACA,SAAOA,KAAP;AACD,CAHM;;IAAMD,Q;UACGvB,W;;;AAIhB,OAAO,MAAM0B,cAAc,GAAIN,GAAD,IAAe;AAAA;;AAC3C,QAAMO,IAAI,GAAG3B,WAAW,CAAEyB,KAAD,IAAkBA,KAAK,CAACD,KAAN,CAAYI,IAAZ,CAAiBC,IAAjB,CAAuBC,CAAD,IAAOA,CAAC,CAACV,GAAF,KAAUA,GAAvC,CAAnB,CAAxB;AACA,SAAOO,IAAP;AACD,CAHM;;IAAMD,c;UACE1B,W;;;AAIf,OAAO,MAAM+B,mBAAmB,GAAIC,QAAD,IAA4B;AAAA;;AAC7D,QAAML,IAAI,GAAG3B,WAAW,CAAEyB,KAAD,IAAkBA,KAAK,CAACD,KAAN,CAAYI,IAAZ,CAAiBC,IAAjB,CAAuBC,CAAD,IAAOA,CAAC,CAACE,QAAF,KAAeA,QAA5C,CAAnB,CAAxB;AACA,SAAOL,IAAP;AACD,CAHM;;IAAMI,mB;UACE/B,W;;;AAIf,OAAO,MAAMiC,WAAW,GAAIb,GAAD,IAAS;AAAA;;AAClC,QAAMO,IAAI,GAAGD,cAAc,CAACN,GAAD,CAA3B;AAEA,SAAO;AACLc,IAAAA,SAAS,EAAEP,IAAI,CAACQ,QAAL,GAAgB,IAAIhC,SAAJ,CAAcwB,IAAI,CAACQ,QAAL,CAAcD,SAA5B,CAAhB,GAAyD9B,QAD/D;AAELgC,IAAAA,YAAY,EAAET,IAAI,CAACQ,QAAL,GAAgB,IAAIhC,SAAJ,CAAcwB,IAAI,CAACQ,QAAL,CAAcC,YAA5B,CAAhB,GAA4DhC,QAFrE;AAGLiC,IAAAA,aAAa,EAAEV,IAAI,CAACQ,QAAL,GAAgB,IAAIhC,SAAJ,CAAcwB,IAAI,CAACQ,QAAL,CAAcE,aAA5B,CAAhB,GAA6DjC,QAHvE;AAILkC,IAAAA,QAAQ,EAAEX,IAAI,CAACQ,QAAL,GAAgB,IAAIhC,SAAJ,CAAcwB,IAAI,CAACQ,QAAL,CAAcG,QAA5B,CAAhB,GAAwDlC;AAJ7D,GAAP;AAMD,CATM,C,CAWP;;IAXa6B,W;UACEP,c;;;AAWf,OAAO,MAAMa,mBAAmB,GAAInB,GAAD,IAA4B;AAAA;;AAC7D,QAAMO,IAAI,GAAGD,cAAc,CAACN,GAAD,CAA3B;AACA,SAAOO,IAAI,IAAI,IAAIxB,SAAJ,CAAcwB,IAAI,CAACa,KAAL,CAAWC,SAAzB,CAAf;AACD,CAHM;;IAAMF,mB;UACEb,c;;;AAIf,OAAO,MAAMgB,eAAe,GAAG,CAACC,MAAD,EAAiBC,WAAjB,KAA2C;AAAA;;AACxE,QAAMjB,IAAI,GAAGI,mBAAmB,CAACY,MAAD,CAAhC;AACA,QAAME,mBAAmB,GAAGN,mBAAmB,CAACZ,IAAI,CAACP,GAAN,CAA/C;AACA,MAAI0B,YAAY,GAAG1C,QAAnB;;AAEA,MAAIuB,IAAI,CAACoB,aAAL,IAAsBpB,IAAI,CAACqB,mBAA/B,EAAoD;AAClD;AACA,UAAMC,sBAAsB,GAAGJ,mBAAmB,CAACK,KAApB,CAA0BvB,IAAI,CAACwB,gBAA/B,CAA/B,CAFkD,CAGlD;;AACA,UAAMC,6BAA6B,GAAGH,sBAAsB,CAACC,KAAvB,CAA6B,CAA7B,CAAtC,CAJkD,CAKlD;;AACA,UAAMG,aAAa,GAAGhD,gBAAgB,CAAC,IAAIF,SAAJ,CAAcwB,IAAI,CAACoB,aAAnB,CAAD,CAAtC;AACAD,IAAAA,YAAY,GAAGF,WAAW,GAAG,IAAIzC,SAAJ,CAAcwB,IAAI,CAACa,KAAL,CAAWC,SAAzB,CAAH,GAAyCW,6BAA6B,CAACE,GAA9B,CAAkCD,aAAlC,CAAnE;AACD;;AAED,SAAOP,YAAP;AACD,CAhBM,C,CAkBP;;IAlBaJ,e;UACEX,mB,EACeQ,mB;;;AAkB9B,OAAO,MAAMgB,eAAe,GAAG,MAAiB;AAAA;;AAC9C,QAAMC,WAAW,GAAG9B,cAAc,CAAC,CAAD,CAAlC;AACA,SAAO,IAAIvB,SAAJ,CAAcqD,WAAW,CAACC,UAAZ,CAAuBhB,SAArC,CAAP;AACD,CAHM;;IAAMc,e;UACS7B,c;;;AAItB,OAAO,MAAMgC,gBAAgB,GAAG,MAAiB;AAAA;;AAC/C,QAAMC,WAAW,GAAGjC,cAAc,CAAC,CAAD,CAAlC;AAEA,QAAMkC,qBAAqB,GAAGD,WAAW,CAACnB,KAAZ,CAAkBC,SAAhD;AAEA,QAAMoB,aAAa,GAAG9D,OAAO,CAAC,MAAM;AAClC,WAAO,IAAII,SAAJ,CAAcyD,qBAAd,CAAP;AACD,GAF4B,EAE1B,CAACA,qBAAD,CAF0B,CAA7B;AAIA,SAAOC,aAAP;AACD,CAVM;;KAAMH,gB;UACShC,c;;;AAWtB,OAAO,MAAMoC,aAAa,GAAG,MAAiB;AAAA;;AAC5C,QAAMtC,KAAK,GAAGD,QAAQ,EAAtB;AACA,MAAIwC,KAAK,GAAG,IAAI5D,SAAJ,CAAc,CAAd,CAAZ;;AACA,OAAK,IAAI6D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGxC,KAAK,CAACI,IAAN,CAAWqC,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC1C,UAAMrC,IAAI,GAAGH,KAAK,CAACI,IAAN,CAAWoC,CAAX,CAAb;;AACA,QAAIrC,IAAI,CAACqB,mBAAL,IAA4BrB,IAAI,CAACqB,mBAAL,KAA6B,GAA7D,EAAkE;AAChE,UAAIkB,GAAJ;;AACA,UAAI,CAACvC,IAAI,CAACiB,WAAV,EAAuB;AACrBsB,QAAAA,GAAG,GAAI,IAAI/D,SAAJ,CAAcwB,IAAI,CAACqB,mBAAnB,CAAD,CAA0CE,KAA1C,CAAgDvB,IAAI,CAAC8B,UAAL,CAAgBhB,SAAhE,CAAN;AACD,OAFD,MAEO;AACLyB,QAAAA,GAAG,GAAI,IAAI/D,SAAJ,CAAcwB,IAAI,CAACqB,mBAAnB,CAAD,CAA0CE,KAA1C,CAAgDvB,IAAI,CAACa,KAAL,CAAWC,SAA3D,CAAN;AACD;;AACDsB,MAAAA,KAAK,GAAGA,KAAK,CAACI,IAAN,CAAWD,GAAX,CAAR;AACD;AACF;;AACD,SAAOH,KAAP;AACD,CAhBM,C,CAkBP;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;KA9DaD,a;UACGvC,Q","sourcesContent":["import React, { useEffect, useMemo } from 'react'\r\n// import axios from 'axios'\r\nimport { useSelector } from 'react-redux'\r\nimport { useAppDispatch } from 'state'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { getBalanceAmount } from 'utils/formatBalance'\r\nimport { farmsConfig } from 'config/constants'\r\nimport useRefresh from 'hooks/useRefresh'\r\nimport { fetchFarmsPublicDataAsync, fetchFarmUserDataAsync, nonArchivedFarms } from '.'\r\nimport { State, Farm, FarmsState } from '../types'\r\n\r\nexport const usePollFarmsData = (includeArchive = false) => {\r\n  const dispatch = useAppDispatch()\r\n  const { slowRefresh } = useRefresh()\r\n  const { account } = useWeb3React()\r\n\r\n  useEffect(() => {\r\n    const farmsToFetch = includeArchive ? farmsConfig : nonArchivedFarms\r\n    const pids = farmsToFetch.map((farmToFetch) => farmToFetch.pid)\r\n\r\n    dispatch(fetchFarmsPublicDataAsync(pids))\r\n\r\n    if (account) {\r\n      dispatch(fetchFarmUserDataAsync({ account, pids }))\r\n    }\r\n  }, [includeArchive, dispatch, slowRefresh, account])\r\n}\r\n\r\n/**\r\n * Fetches the \"core\" farm data used globally\r\n * 2 = LOKI-BNB LP\r\n * 3 = BUSD-BNB LP\r\n */\r\nexport const usePollCoreFarmData = () => {\r\n  const dispatch = useAppDispatch()\r\n  const { fastRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchFarmsPublicDataAsync([2, 3]))\r\n  }, [dispatch, fastRefresh])\r\n}\r\n\r\nexport const useFarms = (): FarmsState => {\r\n  const farms = useSelector((state: State) => state.farms)\r\n  return farms\r\n}\r\n\r\nexport const useFarmFromPid = (pid): Farm => {\r\n  const farm = useSelector((state: State) => state.farms.data.find((f) => f.pid === pid))\r\n  return farm\r\n}\r\n\r\nexport const useFarmFromLpSymbol = (lpSymbol: string): Farm => {\r\n  const farm = useSelector((state: State) => state.farms.data.find((f) => f.lpSymbol === lpSymbol))\r\n  return farm\r\n}\r\n\r\nexport const useFarmUser = (pid) => {\r\n  const farm = useFarmFromPid(pid)\r\n\r\n  return {\r\n    allowance: farm.userData ? new BigNumber(farm.userData.allowance) : BIG_ZERO,\r\n    tokenBalance: farm.userData ? new BigNumber(farm.userData.tokenBalance) : BIG_ZERO,\r\n    stakedBalance: farm.userData ? new BigNumber(farm.userData.stakedBalance) : BIG_ZERO,\r\n    earnings: farm.userData ? new BigNumber(farm.userData.earnings) : BIG_ZERO,\r\n  }\r\n}\r\n\r\n// Return the base token price for a farm, from a given pid\r\nexport const useBusdPriceFromPid = (pid: number): BigNumber => {\r\n  const farm = useFarmFromPid(pid)\r\n  return farm && new BigNumber(farm.token.busdPrice)\r\n}\r\n\r\nexport const useLpTokenPrice = (symbol: string, isTokenOnly?: boolean) => {\r\n  const farm = useFarmFromLpSymbol(symbol)\r\n  const farmTokenPriceInUsd = useBusdPriceFromPid(farm.pid)\r\n  let lpTokenPrice = BIG_ZERO\r\n\r\n  if (farm.lpTotalSupply && farm.lpTotalInQuoteToken) {\r\n    // Total value of base token in LP\r\n    const valueOfBaseTokenInFarm = farmTokenPriceInUsd.times(farm.tokenAmountTotal)\r\n    // Double it to get overall value in LP\r\n    const overallValueOfAllTokensInFarm = valueOfBaseTokenInFarm.times(2)\r\n    // Divide total value of all tokens, by the number of LP tokens\r\n    const totalLpTokens = getBalanceAmount(new BigNumber(farm.lpTotalSupply))\r\n    lpTokenPrice = isTokenOnly ? new BigNumber(farm.token.busdPrice) : overallValueOfAllTokensInFarm.div(totalLpTokens)\r\n  }\r\n\r\n  return lpTokenPrice\r\n}\r\n\r\n// /!\\ Deprecated , use the BUSD hook in /hooks\r\n\r\nexport const usePriceBnbBusd = (): BigNumber => {\r\n  const bnbBusdFarm = useFarmFromPid(3)\r\n  return new BigNumber(bnbBusdFarm.quoteToken.busdPrice)\r\n}\r\n\r\nexport const usePriceCakeBusd = (): BigNumber => {\r\n  const cakeBnbFarm = useFarmFromPid(1)\r\n\r\n  const cakePriceBusdAsString = cakeBnbFarm.token.busdPrice\r\n\r\n  const cakePriceBusd = useMemo(() => {\r\n    return new BigNumber(cakePriceBusdAsString)\r\n  }, [cakePriceBusdAsString])\r\n\r\n  return cakePriceBusd\r\n}\r\n\r\nexport const useTotalValue = (): BigNumber => {\r\n  const farms = useFarms();\r\n  let value = new BigNumber(0);\r\n  for (let i = 0; i < farms.data.length; i++) {\r\n    const farm = farms.data[i]\r\n    if (farm.lpTotalInQuoteToken && farm.lpTotalInQuoteToken !== '0') {\r\n      let val;\r\n      if (!farm.isTokenOnly) {\r\n        val = (new BigNumber(farm.lpTotalInQuoteToken)).times(farm.quoteToken.busdPrice);\r\n      } else {\r\n        val = (new BigNumber(farm.lpTotalInQuoteToken)).times(farm.token.busdPrice);\r\n      }\r\n      value = value.plus(val);\r\n    }\r\n  }\r\n  return value;\r\n}\r\n\r\n// const useFetch = (url, options) => {\r\n//   const [data, setData] = React.useState({ response:null, route:null, ethereum: null, polyvertex:null, bitcoin:null});\r\n\r\n//   useEffect(() => {\r\n//     const fetchData = async () => {\r\n//       const result = await axios(\r\n//         url,\r\n//       );\r\n \r\n//       setData(result.data);\r\n//     };\r\n \r\n//     fetchData();\r\n//   }, [url]);\r\n//   const err = null;\r\n//   return {data, err};\r\n// };\r\n\r\n// export const usePriceWethBusd = (): BigNumber => {\r\n//   const url = \"https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd\"\r\n//   const { data, err} = useFetch(url, null);\r\n//   let output = new BigNumber(0);\r\n//   if(data.ethereum){\r\n//     output = new BigNumber(data.ethereum.usd);\r\n//   }\r\n//   return output;\r\n// }\r\n// export const usePriceBtcBusd = (): BigNumber => {\r\n//   const url = \"https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd\"\r\n//   const { data, err} = useFetch(url, null);\r\n//   let output = new BigNumber(0);\r\n//   if(data.bitcoin){\r\n//     output = new BigNumber(data.bitcoin.usd);\r\n//   }\r\n//   return output;\r\n// }\r\n// export const usePriceRouteBusd = (): BigNumber => {\r\n//   const url = \"https://api.coingecko.com/api/v3/simple/price?ids=route&vs_currencies=usd\"\r\n//   const { data, err} = useFetch(url, null);\r\n//   let output = new BigNumber(0);\r\n//   if(data.route){\r\n//     output = new BigNumber(data.route.usd);\r\n//   }\r\n//   return output;\r\n// }"]},"metadata":{},"sourceType":"module"}