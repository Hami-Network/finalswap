{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/97154/swap/hami/LokiswapUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/97154/swap/hami/LokiswapUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/97154/swap/hami/LokiswapUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/97154/swap/hami/LokiswapUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import BigNumber from'bignumber.js';import{useWeb3React}from'@web3-react/core';import{getBep20Contract,getCakeContract}from'utils/contractHelpers';import{BIG_ZERO}from'utils/bigNumber';import{simpleRpcProvider}from'utils/providers';import useRefresh from'./useRefresh';import useLastUpdated from'./useLastUpdated';export var FetchStatus;(function(FetchStatus){FetchStatus[\"NOT_FETCHED\"]=\"not-fetched\";FetchStatus[\"SUCCESS\"]=\"success\";FetchStatus[\"FAILED\"]=\"failed\";})(FetchStatus||(FetchStatus={}));var useTokenBalance=function useTokenBalance(tokenAddress){var NOT_FETCHED=FetchStatus.NOT_FETCHED,SUCCESS=FetchStatus.SUCCESS,FAILED=FetchStatus.FAILED;var _useState=useState({balance:BIG_ZERO,fetchStatus:NOT_FETCHED}),_useState2=_slicedToArray(_useState,2),balanceState=_useState2[0],setBalanceState=_useState2[1];var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var _useRefresh=useRefresh(),fastRefresh=_useRefresh.fastRefresh;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var contract,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:contract=getBep20Contract(tokenAddress);_context.prev=1;_context.next=4;return contract.balanceOf(account);case 4:res=_context.sent;setBalanceState({balance:new BigNumber(res.toString()),fetchStatus:SUCCESS});_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);setBalanceState(function(prev){return _objectSpread(_objectSpread({},prev),{},{fetchStatus:FAILED});});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function fetchBalance(){return _ref.apply(this,arguments);};}();if(account){fetchBalance();}},[account,tokenAddress,fastRefresh,SUCCESS,FAILED]);return balanceState;};export var useTotalSupply=function useTotalSupply(){var _useRefresh2=useRefresh(),slowRefresh=_useRefresh2.slowRefresh;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),totalSupply=_useState4[0],setTotalSupply=_useState4[1];useEffect(function(){function fetchTotalSupply(){return _fetchTotalSupply.apply(this,arguments);}function _fetchTotalSupply(){_fetchTotalSupply=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var cakeContract,supply;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cakeContract=getCakeContract();_context2.next=3;return cakeContract.totalSupply();case 3:supply=_context2.sent;setTotalSupply(new BigNumber(supply.toString()));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchTotalSupply.apply(this,arguments);}fetchTotalSupply();},[slowRefresh]);return totalSupply;};export var useBurnedBalance=function useBurnedBalance(tokenAddress){var _useState5=useState(BIG_ZERO),_useState6=_slicedToArray(_useState5,2),balance=_useState6[0],setBalance=_useState6[1];var _useRefresh3=useRefresh(),slowRefresh=_useRefresh3.slowRefresh;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var contract,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:contract=getBep20Contract(tokenAddress);_context3.next=3;return contract.balanceOf('0x000000000000000000000000000000000000dEaD');case 3:res=_context3.sent;setBalance(new BigNumber(res.toString()));case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchBalance(){return _ref2.apply(this,arguments);};}();fetchBalance();},[tokenAddress,slowRefresh]);return balance;};export var useGetBnbBalance=function useGetBnbBalance(){var _useState7=useState(FetchStatus.NOT_FETCHED),_useState8=_slicedToArray(_useState7,2),fetchStatus=_useState8[0],setFetchStatus=_useState8[1];var _useState9=useState(BIG_ZERO),_useState10=_slicedToArray(_useState9,2),balance=_useState10[0],setBalance=_useState10[1];var _useWeb3React2=useWeb3React(),account=_useWeb3React2.account;var _useLastUpdated=useLastUpdated(),lastUpdated=_useLastUpdated.lastUpdated,setLastUpdated=_useLastUpdated.setLastUpdated;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var walletBalance;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return simpleRpcProvider.getBalance(account);case 3:walletBalance=_context4.sent;setBalance(new BigNumber(walletBalance.toString()));setFetchStatus(FetchStatus.SUCCESS);_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);setFetchStatus(FetchStatus.FAILED);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function fetchBalance(){return _ref3.apply(this,arguments);};}();if(account){fetchBalance();}},[account,lastUpdated,setBalance,setFetchStatus]);return{balance:balance,fetchStatus:fetchStatus,refresh:setLastUpdated};};export default useTokenBalance;","map":{"version":3,"sources":["C:/Users/97154/swap/hami/LokiswapUI/src/hooks/useTokenBalance.ts"],"names":["useEffect","useState","BigNumber","useWeb3React","getBep20Contract","getCakeContract","BIG_ZERO","simpleRpcProvider","useRefresh","useLastUpdated","FetchStatus","useTokenBalance","tokenAddress","NOT_FETCHED","SUCCESS","FAILED","balance","fetchStatus","balanceState","setBalanceState","account","fastRefresh","fetchBalance","contract","balanceOf","res","toString","console","error","prev","useTotalSupply","slowRefresh","totalSupply","setTotalSupply","fetchTotalSupply","cakeContract","supply","useBurnedBalance","setBalance","useGetBnbBalance","setFetchStatus","lastUpdated","setLastUpdated","getBalance","walletBalance","refresh"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { getBep20Contract, getCakeContract } from 'utils/contractHelpers'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { simpleRpcProvider } from 'utils/providers'\r\nimport useRefresh from './useRefresh'\r\nimport useLastUpdated from './useLastUpdated'\r\n\r\ntype UseTokenBalanceState = {\r\n  balance: BigNumber\r\n  fetchStatus: FetchStatus\r\n}\r\n\r\nexport enum FetchStatus {\r\n  NOT_FETCHED = 'not-fetched',\r\n  SUCCESS = 'success',\r\n  FAILED = 'failed',\r\n}\r\n\r\nconst useTokenBalance = (tokenAddress: string) => {\r\n  const { NOT_FETCHED, SUCCESS, FAILED } = FetchStatus\r\n  const [balanceState, setBalanceState] = useState<UseTokenBalanceState>({\r\n    balance: BIG_ZERO,\r\n    fetchStatus: NOT_FETCHED,\r\n  })\r\n  const { account } = useWeb3React()\r\n  const { fastRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const contract = getBep20Contract(tokenAddress)\r\n      try {\r\n        const res = await contract.balanceOf(account)\r\n        setBalanceState({ balance: new BigNumber(res.toString()), fetchStatus: SUCCESS })\r\n      } catch (e) {\r\n        console.error(e)\r\n        setBalanceState((prev) => ({\r\n          ...prev,\r\n          fetchStatus: FAILED,\r\n        }))\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      fetchBalance()\r\n    }\r\n  }, [account, tokenAddress, fastRefresh, SUCCESS, FAILED])\r\n\r\n  return balanceState\r\n}\r\n\r\nexport const useTotalSupply = () => {\r\n  const { slowRefresh } = useRefresh()\r\n  const [totalSupply, setTotalSupply] = useState<BigNumber>()\r\n\r\n  useEffect(() => {\r\n    async function fetchTotalSupply() {\r\n      const cakeContract = getCakeContract()\r\n      const supply = await cakeContract.totalSupply()\r\n      setTotalSupply(new BigNumber(supply.toString()))\r\n    }\r\n\r\n    fetchTotalSupply()\r\n  }, [slowRefresh])\r\n\r\n  return totalSupply\r\n}\r\n\r\nexport const useBurnedBalance = (tokenAddress: string) => {\r\n  const [balance, setBalance] = useState(BIG_ZERO)\r\n  const { slowRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const contract = getBep20Contract(tokenAddress)\r\n      const res = await contract.balanceOf('0x000000000000000000000000000000000000dEaD')\r\n      setBalance(new BigNumber(res.toString()))\r\n    }\r\n\r\n    fetchBalance()\r\n  }, [tokenAddress, slowRefresh])\r\n\r\n  return balance\r\n}\r\n\r\nexport const useGetBnbBalance = () => {\r\n  const [fetchStatus, setFetchStatus] = useState(FetchStatus.NOT_FETCHED)\r\n  const [balance, setBalance] = useState(BIG_ZERO)\r\n  const { account } = useWeb3React()\r\n  const { lastUpdated, setLastUpdated } = useLastUpdated()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      try {\r\n        const walletBalance = await simpleRpcProvider.getBalance(account)\r\n        setBalance(new BigNumber(walletBalance.toString()))\r\n        setFetchStatus(FetchStatus.SUCCESS)\r\n      } catch {\r\n        setFetchStatus(FetchStatus.FAILED)\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      fetchBalance()\r\n    }\r\n  }, [account, lastUpdated, setBalance, setFetchStatus])\r\n\r\n  return { balance, fetchStatus, refresh: setLastUpdated }\r\n}\r\n\r\nexport default useTokenBalance\r\n"]},"metadata":{},"sourceType":"module"}