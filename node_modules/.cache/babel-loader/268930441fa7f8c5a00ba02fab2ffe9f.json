{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\97154\\\\swap\\\\hami\\\\LokiswapUI\\\\src\\\\components\\\\RoiCalculatorModal\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Modal, Text, Button, Flex, ButtonMenu, BalanceInput, HelpIcon, ButtonMenuItem, useTooltip } from '@pancakeswap/uikit';\nimport { useTranslation } from 'contexts/Localization';\nimport { getBalanceNumber } from 'utils/formatBalance';\nimport useActiveWeb3React from 'hooks/useActiveWeb3React';\nimport RoiCalculatorFooter from './RoiCalculatorFooter';\nimport RoiCard from './RoiCard';\nimport useRoiCalculatorReducer, { CalculatorMode, EditingCurrency } from './useRoiCalculatorReducer';\nimport AnimatedArrow from './AnimatedArrow';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StyledModal = styled(Modal)`\n  width: 345px;\n  & > :nth-child(2) {\n    padding: 0;\n  }\n`;\n_c = StyledModal;\nconst ScrollableContainer = styled.div`\n  padding: 24px;\n  max-height: 500px;\n  overflow-y: auto;\n  ${({\n  theme\n}) => theme.mediaQueries.sm} {\n    max-height: none;\n  }\n`;\n_c2 = ScrollableContainer;\nconst FullWidthButtonMenu = styled(ButtonMenu)`\n  width: 100%;\n\n  & > button {\n    width: 100%;\n  }\n\n  opacity: ${({\n  disabled\n}) => disabled ? 0.5 : 1};\n`;\n_c3 = FullWidthButtonMenu;\n\nconst RoiCalculatorModal = ({\n  onDismiss,\n  onBack,\n  earningTokenPrice,\n  apr,\n  displayApr,\n  linkLabel,\n  linkHref,\n  stakingTokenBalance,\n  stakingTokenSymbol,\n  stakingTokenPrice,\n  multiplier,\n  initialValue,\n  earningTokenSymbol = 'LOKI',\n  autoCompoundFrequency = 0,\n  performanceFee = 0,\n  isFarm = false\n}) => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    account\n  } = useActiveWeb3React();\n  const balanceInputRef = useRef(null);\n  console.log('debug->roi', stakingTokenPrice);\n  console.log('debug->roi', earningTokenPrice);\n  console.log('debug->roi', apr);\n  const {\n    state,\n    setPrincipalFromUSDValue,\n    setPrincipalFromTokenValue,\n    setStakingDuration,\n    toggleCompounding,\n    toggleEditingCurrency,\n    setCompoundingFrequency,\n    setCalculatorMode,\n    setTargetRoi\n  } = useRoiCalculatorReducer(stakingTokenPrice, earningTokenPrice, apr, autoCompoundFrequency, performanceFee);\n  const {\n    compounding,\n    activeCompoundingIndex,\n    stakingDuration,\n    editingCurrency\n  } = state.controls;\n  const {\n    principalAsUSD,\n    principalAsToken\n  } = state.data; // Auto-focus input on opening modal\n\n  useEffect(() => {\n    if (balanceInputRef.current) {\n      balanceInputRef.current.focus();\n    }\n  }, []); // If user comes to calculator from staking modal - initialize with whatever they put in there\n\n  useEffect(() => {\n    if (initialValue) {\n      setPrincipalFromTokenValue(initialValue);\n    }\n  }, [initialValue, setPrincipalFromTokenValue]);\n  const {\n    targetRef,\n    tooltip,\n    tooltipVisible\n  } = useTooltip(isFarm ? t('“My Balance” here includes both LP Tokens in your wallet, and LP Tokens already staked in this farm.') : t('“My Balance” here includes both %assetSymbol% in your wallet, and %assetSymbol% already staked in this pool.', {\n    assetSymbol: stakingTokenSymbol\n  }), {\n    placement: 'top-end',\n    tooltipOffset: [20, 10]\n  });\n\n  const onBalanceFocus = () => {\n    setCalculatorMode(CalculatorMode.ROI_BASED_ON_PRINCIPAL);\n  };\n\n  const editingUnit = editingCurrency === EditingCurrency.TOKEN ? stakingTokenSymbol : 'USD';\n  const editingValue = editingCurrency === EditingCurrency.TOKEN ? principalAsToken : principalAsUSD;\n  const conversionUnit = editingCurrency === EditingCurrency.TOKEN ? 'USD' : stakingTokenSymbol;\n  const conversionValue = editingCurrency === EditingCurrency.TOKEN ? principalAsUSD : principalAsToken;\n  const onUserInput = editingCurrency === EditingCurrency.TOKEN ? setPrincipalFromTokenValue : setPrincipalFromUSDValue;\n  return /*#__PURE__*/_jsxDEV(StyledModal, {\n    title: t('ROI Calculator'),\n    onDismiss: onBack || onDismiss,\n    onBack: onBack !== null && onBack !== void 0 ? onBack : null,\n    headerBackground: \"gradients.cardHeader\",\n    children: [/*#__PURE__*/_jsxDEV(ScrollableContainer, {\n      children: [/*#__PURE__*/_jsxDEV(Flex, {\n        flexDirection: \"column\",\n        mb: \"8px\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          color: \"secondary\",\n          bold: true,\n          fontSize: \"12px\",\n          textTransform: \"uppercase\",\n          children: t('%asset% staked', {\n            asset: stakingTokenSymbol\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BalanceInput, {\n          currencyValue: `${conversionValue} ${conversionUnit}`,\n          innerRef: balanceInputRef,\n          placeholder: \"0.00\",\n          value: editingValue,\n          unit: editingUnit,\n          onUserInput: onUserInput,\n          switchEditingUnits: toggleEditingCurrency,\n          onFocus: onBalanceFocus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          justifyContent: \"space-between\",\n          mt: \"8px\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            scale: \"xs\",\n            p: \"4px 16px\",\n            width: \"68px\",\n            variant: \"tertiary\",\n            onClick: () => setPrincipalFromUSDValue('100'),\n            children: \"$100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            scale: \"xs\",\n            p: \"4px 16px\",\n            width: \"68px\",\n            variant: \"tertiary\",\n            onClick: () => setPrincipalFromUSDValue('1000'),\n            children: \"$1000\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            disabled: stakingTokenBalance.lte(0) || !account,\n            scale: \"xs\",\n            p: \"4px 16px\",\n            width: \"128px\",\n            variant: \"tertiary\",\n            onClick: () => setPrincipalFromUSDValue(getBalanceNumber(stakingTokenBalance.times(stakingTokenPrice)).toString()),\n            children: t('My Balance').toLocaleUpperCase()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            ref: targetRef,\n            children: /*#__PURE__*/_jsxDEV(HelpIcon, {\n              width: \"16px\",\n              height: \"16px\",\n              color: \"textSubtle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), tooltipVisible && tooltip]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          mt: \"24px\",\n          color: \"secondary\",\n          bold: true,\n          fontSize: \"12px\",\n          textTransform: \"uppercase\",\n          children: t('Staked for')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FullWidthButtonMenu, {\n          activeIndex: stakingDuration,\n          onItemClick: setStakingDuration,\n          scale: \"sm\",\n          children: [/*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n            variant: \"tertiary\",\n            children: t('1D')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n            variant: \"tertiary\",\n            children: t('7D')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n            variant: \"tertiary\",\n            children: t('30D')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n            variant: \"tertiary\",\n            children: t('1Y')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ButtonMenuItem, {\n            variant: \"tertiary\",\n            children: t('5Y')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AnimatedArrow, {\n        calculatorState: state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        children: /*#__PURE__*/_jsxDEV(RoiCard, {\n          earningTokenSymbol: earningTokenSymbol,\n          calculatorState: state,\n          setTargetRoi: setTargetRoi,\n          setCalculatorMode: setCalculatorMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RoiCalculatorFooter, {\n      isFarm: isFarm,\n      apr: apr,\n      displayApr: displayApr,\n      autoCompoundFrequency: autoCompoundFrequency,\n      multiplier: multiplier,\n      linkLabel: linkLabel,\n      linkHref: linkHref,\n      performanceFee: performanceFee\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RoiCalculatorModal, \"Puo5jC6alPFAV3cGTHZoq0kxCjk=\", false, function () {\n  return [useTranslation, useActiveWeb3React, useRoiCalculatorReducer, useTooltip];\n});\n\n_c4 = RoiCalculatorModal;\nexport default RoiCalculatorModal;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"StyledModal\");\n$RefreshReg$(_c2, \"ScrollableContainer\");\n$RefreshReg$(_c3, \"FullWidthButtonMenu\");\n$RefreshReg$(_c4, \"RoiCalculatorModal\");","map":{"version":3,"sources":["C:/Users/97154/swap/hami/LokiswapUI/src/components/RoiCalculatorModal/index.tsx"],"names":["React","useRef","useEffect","styled","Modal","Text","Button","Flex","ButtonMenu","BalanceInput","HelpIcon","ButtonMenuItem","useTooltip","useTranslation","getBalanceNumber","useActiveWeb3React","RoiCalculatorFooter","RoiCard","useRoiCalculatorReducer","CalculatorMode","EditingCurrency","AnimatedArrow","StyledModal","ScrollableContainer","div","theme","mediaQueries","sm","FullWidthButtonMenu","disabled","RoiCalculatorModal","onDismiss","onBack","earningTokenPrice","apr","displayApr","linkLabel","linkHref","stakingTokenBalance","stakingTokenSymbol","stakingTokenPrice","multiplier","initialValue","earningTokenSymbol","autoCompoundFrequency","performanceFee","isFarm","t","account","balanceInputRef","console","log","state","setPrincipalFromUSDValue","setPrincipalFromTokenValue","setStakingDuration","toggleCompounding","toggleEditingCurrency","setCompoundingFrequency","setCalculatorMode","setTargetRoi","compounding","activeCompoundingIndex","stakingDuration","editingCurrency","controls","principalAsUSD","principalAsToken","data","current","focus","targetRef","tooltip","tooltipVisible","assetSymbol","placement","tooltipOffset","onBalanceFocus","ROI_BASED_ON_PRINCIPAL","editingUnit","TOKEN","editingValue","conversionUnit","conversionValue","onUserInput","asset","lte","times","toString","toLocaleUpperCase"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  Modal,\r\n  Text,\r\n  Button,\r\n  Flex,\r\n  ButtonMenu,\r\n  Checkbox,\r\n  BalanceInput,\r\n  HelpIcon,\r\n  ButtonMenuItem,\r\n  useTooltip,\r\n} from '@pancakeswap/uikit'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\r\nimport RoiCalculatorFooter from './RoiCalculatorFooter'\r\nimport RoiCard from './RoiCard'\r\nimport useRoiCalculatorReducer, { CalculatorMode, EditingCurrency } from './useRoiCalculatorReducer'\r\nimport AnimatedArrow from './AnimatedArrow'\r\n\r\ninterface RoiCalculatorModalProps {\r\n  onDismiss?: () => void\r\n  onBack?: () => void\r\n  earningTokenPrice: number\r\n  apr: number\r\n  displayApr?: string\r\n  linkLabel: string\r\n  linkHref: string\r\n  stakingTokenBalance: BigNumber\r\n  stakingTokenSymbol: string\r\n  stakingTokenPrice: number\r\n  earningTokenSymbol?: string\r\n  multiplier?: string\r\n  autoCompoundFrequency?: number\r\n  performanceFee?: number\r\n  isFarm?: boolean\r\n  initialValue?: string\r\n}\r\n\r\nconst StyledModal = styled(Modal)`\r\n  width: 345px;\r\n  & > :nth-child(2) {\r\n    padding: 0;\r\n  }\r\n`\r\n\r\nconst ScrollableContainer = styled.div`\r\n  padding: 24px;\r\n  max-height: 500px;\r\n  overflow-y: auto;\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    max-height: none;\r\n  }\r\n`\r\n\r\nconst FullWidthButtonMenu = styled(ButtonMenu)<{ disabled?: boolean }>`\r\n  width: 100%;\r\n\r\n  & > button {\r\n    width: 100%;\r\n  }\r\n\r\n  opacity: ${({ disabled }) => (disabled ? 0.5 : 1)};\r\n`\r\n\r\nconst RoiCalculatorModal: React.FC<RoiCalculatorModalProps> = ({\r\n  onDismiss,\r\n  onBack,\r\n  earningTokenPrice,\r\n  apr,\r\n  displayApr,\r\n  linkLabel,\r\n  linkHref,\r\n  stakingTokenBalance,\r\n  stakingTokenSymbol,\r\n  stakingTokenPrice,\r\n  multiplier,\r\n  initialValue,\r\n  earningTokenSymbol = 'LOKI',\r\n  autoCompoundFrequency = 0,\r\n  performanceFee = 0,\r\n  isFarm = false,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useActiveWeb3React()\r\n  const balanceInputRef = useRef<HTMLInputElement | null>(null)\r\n  console.log('debug->roi', stakingTokenPrice)\r\n  console.log('debug->roi', earningTokenPrice)\r\n  console.log('debug->roi', apr)\r\n  const {\r\n    state,\r\n    setPrincipalFromUSDValue,\r\n    setPrincipalFromTokenValue,\r\n    setStakingDuration,\r\n    toggleCompounding,\r\n    toggleEditingCurrency,\r\n    setCompoundingFrequency,\r\n    setCalculatorMode,\r\n    setTargetRoi,\r\n  } = useRoiCalculatorReducer(stakingTokenPrice, earningTokenPrice, apr, autoCompoundFrequency, performanceFee)\r\n\r\n  const { compounding, activeCompoundingIndex, stakingDuration, editingCurrency } = state.controls\r\n  const { principalAsUSD, principalAsToken } = state.data\r\n\r\n  // Auto-focus input on opening modal\r\n  useEffect(() => {\r\n    if (balanceInputRef.current) {\r\n      balanceInputRef.current.focus()\r\n    }\r\n  }, [])\r\n\r\n  // If user comes to calculator from staking modal - initialize with whatever they put in there\r\n  useEffect(() => {\r\n    if (initialValue) {\r\n      setPrincipalFromTokenValue(initialValue)\r\n    }\r\n  }, [initialValue, setPrincipalFromTokenValue])\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    isFarm\r\n      ? t('“My Balance” here includes both LP Tokens in your wallet, and LP Tokens already staked in this farm.')\r\n      : t(\r\n          '“My Balance” here includes both %assetSymbol% in your wallet, and %assetSymbol% already staked in this pool.',\r\n          { assetSymbol: stakingTokenSymbol },\r\n        ),\r\n    { placement: 'top-end', tooltipOffset: [20, 10] },\r\n  )\r\n\r\n  const onBalanceFocus = () => {\r\n    setCalculatorMode(CalculatorMode.ROI_BASED_ON_PRINCIPAL)\r\n  }\r\n\r\n  const editingUnit = editingCurrency === EditingCurrency.TOKEN ? stakingTokenSymbol : 'USD'\r\n  const editingValue = editingCurrency === EditingCurrency.TOKEN ? principalAsToken : principalAsUSD\r\n  const conversionUnit = editingCurrency === EditingCurrency.TOKEN ? 'USD' : stakingTokenSymbol\r\n  const conversionValue = editingCurrency === EditingCurrency.TOKEN ? principalAsUSD : principalAsToken\r\n  const onUserInput = editingCurrency === EditingCurrency.TOKEN ? setPrincipalFromTokenValue : setPrincipalFromUSDValue\r\n\r\n  return (\r\n    <StyledModal\r\n      title={t('ROI Calculator')}\r\n      onDismiss={onBack || onDismiss}\r\n      onBack={onBack ?? null}\r\n      headerBackground=\"gradients.cardHeader\"\r\n    >\r\n      <ScrollableContainer>\r\n        <Flex flexDirection=\"column\" mb=\"8px\">\r\n          <Text color=\"secondary\" bold fontSize=\"12px\" textTransform=\"uppercase\">\r\n            {t('%asset% staked', { asset: stakingTokenSymbol })}\r\n          </Text>\r\n          <BalanceInput\r\n            currencyValue={`${conversionValue} ${conversionUnit}`}\r\n            innerRef={balanceInputRef}\r\n            placeholder=\"0.00\"\r\n            value={editingValue}\r\n            unit={editingUnit}\r\n            onUserInput={onUserInput}\r\n            switchEditingUnits={toggleEditingCurrency}\r\n            onFocus={onBalanceFocus}\r\n          />\r\n          <Flex justifyContent=\"space-between\" mt=\"8px\">\r\n            <Button\r\n              scale=\"xs\"\r\n              p=\"4px 16px\"\r\n              width=\"68px\"\r\n              variant=\"tertiary\"\r\n              onClick={() => setPrincipalFromUSDValue('100')}\r\n            >\r\n              $100\r\n            </Button>\r\n            <Button\r\n              scale=\"xs\"\r\n              p=\"4px 16px\"\r\n              width=\"68px\"\r\n              variant=\"tertiary\"\r\n              onClick={() => setPrincipalFromUSDValue('1000')}\r\n            >\r\n              $1000\r\n            </Button>\r\n            <Button\r\n              disabled={stakingTokenBalance.lte(0) || !account}\r\n              scale=\"xs\"\r\n              p=\"4px 16px\"\r\n              width=\"128px\"\r\n              variant=\"tertiary\"\r\n              onClick={() =>\r\n                setPrincipalFromUSDValue(getBalanceNumber(stakingTokenBalance.times(stakingTokenPrice)).toString())\r\n              }\r\n            >\r\n              {t('My Balance').toLocaleUpperCase()}\r\n            </Button>\r\n            <span ref={targetRef}>\r\n              <HelpIcon width=\"16px\" height=\"16px\" color=\"textSubtle\" />\r\n            </span>\r\n            {tooltipVisible && tooltip}\r\n          </Flex>\r\n          <Text mt=\"24px\" color=\"secondary\" bold fontSize=\"12px\" textTransform=\"uppercase\">\r\n            {t('Staked for')}\r\n          </Text>\r\n          <FullWidthButtonMenu activeIndex={stakingDuration} onItemClick={setStakingDuration} scale=\"sm\">\r\n            <ButtonMenuItem variant=\"tertiary\">{t('1D')}</ButtonMenuItem>\r\n            <ButtonMenuItem variant=\"tertiary\">{t('7D')}</ButtonMenuItem>\r\n            <ButtonMenuItem variant=\"tertiary\">{t('30D')}</ButtonMenuItem>\r\n            <ButtonMenuItem variant=\"tertiary\">{t('1Y')}</ButtonMenuItem>\r\n            <ButtonMenuItem variant=\"tertiary\">{t('5Y')}</ButtonMenuItem>\r\n          </FullWidthButtonMenu>\r\n        </Flex>\r\n        <AnimatedArrow calculatorState={state} />\r\n        <Flex>\r\n          <RoiCard\r\n            earningTokenSymbol={earningTokenSymbol}\r\n            calculatorState={state}\r\n            setTargetRoi={setTargetRoi}\r\n            setCalculatorMode={setCalculatorMode}\r\n          />\r\n        </Flex>\r\n      </ScrollableContainer>\r\n      <RoiCalculatorFooter\r\n        isFarm={isFarm}\r\n        apr={apr}\r\n        displayApr={displayApr}\r\n        autoCompoundFrequency={autoCompoundFrequency}\r\n        multiplier={multiplier}\r\n        linkLabel={linkLabel}\r\n        linkHref={linkHref}\r\n        performanceFee={performanceFee}\r\n      />\r\n    </StyledModal>\r\n  )\r\n}\r\n\r\nexport default RoiCalculatorModal\r\n"]},"metadata":{},"sourceType":"module"}