{"ast":null,"code":"import BigNumber from 'bignumber.js';\nimport erc20ABI from 'config/abi/erc20.json';\nimport masterchefABI from 'config/abi/masterchef.json';\nimport multicall from 'utils/multicall';\nimport { getAddress, getMasterChefAddress } from 'utils/addressHelpers';\nexport const fetchFarmUserAllowances = async (account, farmsToFetch) => {\n  const masterChefAddress = getMasterChefAddress();\n  const calls = farmsToFetch.map(farm => {\n    const lpContractAddress = farm.isTokenOnly ? getAddress(farm.token.address) : getAddress(farm.lpAddresses);\n    return {\n      address: lpContractAddress,\n      name: 'allowance',\n      params: [account, masterChefAddress]\n    };\n  });\n  const rawLpAllowances = await multicall(erc20ABI, calls);\n  const parsedLpAllowances = rawLpAllowances.map(lpBalance => {\n    return new BigNumber(lpBalance).toJSON();\n  });\n  return parsedLpAllowances;\n};\nexport const fetchFarmUserTokenBalances = async (account, farmsToFetch) => {\n  const calls = farmsToFetch.map(farm => {\n    const lpContractAddress = farm.isTokenOnly ? getAddress(farm.token.address) : getAddress(farm.lpAddresses);\n    return {\n      address: farm.isTokenOnly ? getAddress(farm.token.address) : lpContractAddress,\n      name: 'balanceOf',\n      params: [account]\n    };\n  });\n  const rawTokenBalances = await multicall(erc20ABI, calls);\n  const parsedTokenBalances = rawTokenBalances.map(tokenBalance => {\n    return new BigNumber(tokenBalance).toJSON();\n  });\n  return parsedTokenBalances;\n};\nexport const fetchFarmUserStakedBalances = async (account, farmsToFetch) => {\n  const masterChefAddress = getMasterChefAddress();\n  const calls = farmsToFetch.map(farm => {\n    return {\n      address: masterChefAddress,\n      name: 'userInfo',\n      params: [farm.pid, account]\n    };\n  });\n  const rawStakedBalances = await multicall(masterchefABI, calls);\n  const parsedStakedBalances = rawStakedBalances.map(stakedBalance => {\n    return new BigNumber(stakedBalance[0]._hex).toJSON();\n  });\n  return parsedStakedBalances;\n};\nexport const fetchFarmUserEarnings = async (account, farmsToFetch) => {\n  const masterChefAddress = getMasterChefAddress();\n  const calls = farmsToFetch.map(farm => {\n    return {\n      address: masterChefAddress,\n      name: 'pendingLOKI',\n      params: [farm.pid, account]\n    };\n  });\n  const rawEarnings = await multicall(masterchefABI, calls);\n  const parsedEarnings = rawEarnings.map(earnings => {\n    return new BigNumber(earnings).toJSON();\n  });\n  return parsedEarnings;\n}; // export const fetchFarmUserCanHarvest = async (account: string, farmsToFetch: FarmConfig[]) => {\n//   const masterChefAddress = getMasterChefAddress()\n//   const calls = farmsToFetch.map((farm) => {\n//     return {\n//       address: masterChefAddress,\n//       name: 'canHarvest',\n//       params: [farm.pid, account],\n//     }\n//   })\n//   const CanHarvests = await multicall(masterchefABI, calls)\n//   const isavailables = CanHarvests.map((CanHarvest) => {\n//     return CanHarvest\n//   })\n//   return isavailables\n// }","map":{"version":3,"sources":["C:/Users/97154/swap/hami/LokiswapUI/src/state/farms/fetchFarmUser.ts"],"names":["BigNumber","erc20ABI","masterchefABI","multicall","getAddress","getMasterChefAddress","fetchFarmUserAllowances","account","farmsToFetch","masterChefAddress","calls","map","farm","lpContractAddress","isTokenOnly","token","address","lpAddresses","name","params","rawLpAllowances","parsedLpAllowances","lpBalance","toJSON","fetchFarmUserTokenBalances","rawTokenBalances","parsedTokenBalances","tokenBalance","fetchFarmUserStakedBalances","pid","rawStakedBalances","parsedStakedBalances","stakedBalance","_hex","fetchFarmUserEarnings","rawEarnings","parsedEarnings","earnings"],"mappings":"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","sourcesContent":["import BigNumber from 'bignumber.js'\r\nimport erc20ABI from 'config/abi/erc20.json'\r\nimport masterchefABI from 'config/abi/masterchef.json'\r\nimport multicall from 'utils/multicall'\r\nimport { getAddress, getMasterChefAddress } from 'utils/addressHelpers'\r\nimport { FarmConfig } from 'config/constants/types'\r\n\r\nexport const fetchFarmUserAllowances = async (account: string, farmsToFetch: FarmConfig[]) => {\r\n  const masterChefAddress = getMasterChefAddress()\r\n\r\n  const calls = farmsToFetch.map((farm) => {\r\n    const lpContractAddress = farm.isTokenOnly ? getAddress(farm.token.address) : getAddress(farm.lpAddresses)\r\n    return { address: lpContractAddress, name: 'allowance', params: [account, masterChefAddress] }\r\n  })\r\n\r\n  const rawLpAllowances = await multicall(erc20ABI, calls)\r\n  const parsedLpAllowances = rawLpAllowances.map((lpBalance) => {\r\n    return new BigNumber(lpBalance).toJSON()\r\n  })\r\n  return parsedLpAllowances\r\n}\r\n\r\nexport const fetchFarmUserTokenBalances = async (account: string, farmsToFetch: FarmConfig[]) => {\r\n  const calls = farmsToFetch.map((farm) => {\r\n    const lpContractAddress = farm.isTokenOnly ? getAddress(farm.token.address) : getAddress(farm.lpAddresses)\r\n    return {\r\n      address: farm.isTokenOnly ? getAddress(farm.token.address) : lpContractAddress,\r\n      name: 'balanceOf',\r\n      params: [account],\r\n    }\r\n  })\r\n\r\n  const rawTokenBalances = await multicall(erc20ABI, calls)\r\n  const parsedTokenBalances = rawTokenBalances.map((tokenBalance) => {\r\n    return new BigNumber(tokenBalance).toJSON()\r\n  })\r\n  return parsedTokenBalances\r\n}\r\n\r\nexport const fetchFarmUserStakedBalances = async (account: string, farmsToFetch: FarmConfig[]) => {\r\n  const masterChefAddress = getMasterChefAddress()\r\n\r\n  const calls = farmsToFetch.map((farm) => {\r\n    return {\r\n      address: masterChefAddress,\r\n      name: 'userInfo',\r\n      params: [farm.pid, account],\r\n    }\r\n  })\r\n\r\n  const rawStakedBalances = await multicall(masterchefABI, calls)\r\n  const parsedStakedBalances = rawStakedBalances.map((stakedBalance) => {\r\n    return new BigNumber(stakedBalance[0]._hex).toJSON()\r\n  })\r\n  return parsedStakedBalances\r\n}\r\n\r\nexport const fetchFarmUserEarnings = async (account: string, farmsToFetch: FarmConfig[]) => {\r\n  const masterChefAddress = getMasterChefAddress()\r\n\r\n  const calls = farmsToFetch.map((farm) => {\r\n    return {\r\n      address: masterChefAddress,\r\n      name: 'pendingLOKI',\r\n      params: [farm.pid, account],\r\n    }\r\n  })\r\n\r\n  const rawEarnings = await multicall(masterchefABI, calls)\r\n  const parsedEarnings = rawEarnings.map((earnings) => {\r\n    return new BigNumber(earnings).toJSON()\r\n  })\r\n  return parsedEarnings\r\n}\r\n\r\n// export const fetchFarmUserCanHarvest = async (account: string, farmsToFetch: FarmConfig[]) => {\r\n//   const masterChefAddress = getMasterChefAddress()\r\n\r\n//   const calls = farmsToFetch.map((farm) => {\r\n//     return {\r\n//       address: masterChefAddress,\r\n//       name: 'canHarvest',\r\n//       params: [farm.pid, account],\r\n//     }\r\n//   })\r\n\r\n//   const CanHarvests = await multicall(masterchefABI, calls)\r\n//   const isavailables = CanHarvests.map((CanHarvest) => {\r\n//     return CanHarvest\r\n//   })\r\n//   return isavailables\r\n// }\r\n"]},"metadata":{},"sourceType":"module"}