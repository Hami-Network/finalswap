{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/97154/swap/hami/LokiswapUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/97154/swap/hami/LokiswapUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import BigNumber from'bignumber.js';import erc20ABI from'config/abi/erc20.json';import masterchefABI from'config/abi/masterchef.json';import multicall from'utils/multicall';import{getAddress,getMasterChefAddress}from'utils/addressHelpers';export var fetchFarmUserAllowances=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(account,farmsToFetch){var masterChefAddress,calls,rawLpAllowances,parsedLpAllowances;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:masterChefAddress=getMasterChefAddress();calls=farmsToFetch.map(function(farm){var lpContractAddress=farm.isTokenOnly?getAddress(farm.token.address):getAddress(farm.lpAddresses);return{address:lpContractAddress,name:'allowance',params:[account,masterChefAddress]};});_context.next=4;return multicall(erc20ABI,calls);case 4:rawLpAllowances=_context.sent;parsedLpAllowances=rawLpAllowances.map(function(lpBalance){return new BigNumber(lpBalance).toJSON();});return _context.abrupt(\"return\",parsedLpAllowances);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchFarmUserAllowances(_x,_x2){return _ref.apply(this,arguments);};}();export var fetchFarmUserTokenBalances=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(account,farmsToFetch){var calls,rawTokenBalances,parsedTokenBalances;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:calls=farmsToFetch.map(function(farm){var lpContractAddress=farm.isTokenOnly?getAddress(farm.token.address):getAddress(farm.lpAddresses);return{address:farm.isTokenOnly?getAddress(farm.token.address):lpContractAddress,name:'balanceOf',params:[account]};});_context2.next=3;return multicall(erc20ABI,calls);case 3:rawTokenBalances=_context2.sent;parsedTokenBalances=rawTokenBalances.map(function(tokenBalance){return new BigNumber(tokenBalance).toJSON();});return _context2.abrupt(\"return\",parsedTokenBalances);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchFarmUserTokenBalances(_x3,_x4){return _ref2.apply(this,arguments);};}();export var fetchFarmUserStakedBalances=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(account,farmsToFetch){var masterChefAddress,calls,rawStakedBalances,parsedStakedBalances;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:masterChefAddress=getMasterChefAddress();calls=farmsToFetch.map(function(farm){return{address:masterChefAddress,name:'userInfo',params:[farm.pid,account]};});_context3.next=4;return multicall(masterchefABI,calls);case 4:rawStakedBalances=_context3.sent;parsedStakedBalances=rawStakedBalances.map(function(stakedBalance){return new BigNumber(stakedBalance[0]._hex).toJSON();});return _context3.abrupt(\"return\",parsedStakedBalances);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchFarmUserStakedBalances(_x5,_x6){return _ref3.apply(this,arguments);};}();export var fetchFarmUserEarnings=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(account,farmsToFetch){var masterChefAddress,calls,rawEarnings,parsedEarnings;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:masterChefAddress=getMasterChefAddress();calls=farmsToFetch.map(function(farm){return{address:masterChefAddress,name:'pendingLOKI',params:[farm.pid,account]};});_context4.next=4;return multicall(masterchefABI,calls);case 4:rawEarnings=_context4.sent;parsedEarnings=rawEarnings.map(function(earnings){return new BigNumber(earnings).toJSON();});return _context4.abrupt(\"return\",parsedEarnings);case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchFarmUserEarnings(_x7,_x8){return _ref4.apply(this,arguments);};}();// export const fetchFarmUserCanHarvest = async (account: string, farmsToFetch: FarmConfig[]) => {\n//   const masterChefAddress = getMasterChefAddress()\n//   const calls = farmsToFetch.map((farm) => {\n//     return {\n//       address: masterChefAddress,\n//       name: 'canHarvest',\n//       params: [farm.pid, account],\n//     }\n//   })\n//   const CanHarvests = await multicall(masterchefABI, calls)\n//   const isavailables = CanHarvests.map((CanHarvest) => {\n//     return CanHarvest\n//   })\n//   return isavailables\n// }","map":{"version":3,"sources":["C:/Users/97154/swap/hami/LokiswapUI/src/state/farms/fetchFarmUser.ts"],"names":["BigNumber","erc20ABI","masterchefABI","multicall","getAddress","getMasterChefAddress","fetchFarmUserAllowances","account","farmsToFetch","masterChefAddress","calls","map","farm","lpContractAddress","isTokenOnly","token","address","lpAddresses","name","params","rawLpAllowances","parsedLpAllowances","lpBalance","toJSON","fetchFarmUserTokenBalances","rawTokenBalances","parsedTokenBalances","tokenBalance","fetchFarmUserStakedBalances","pid","rawStakedBalances","parsedStakedBalances","stakedBalance","_hex","fetchFarmUserEarnings","rawEarnings","parsedEarnings","earnings"],"mappings":"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","sourcesContent":["import BigNumber from 'bignumber.js'\r\nimport erc20ABI from 'config/abi/erc20.json'\r\nimport masterchefABI from 'config/abi/masterchef.json'\r\nimport multicall from 'utils/multicall'\r\nimport { getAddress, getMasterChefAddress } from 'utils/addressHelpers'\r\nimport { FarmConfig } from 'config/constants/types'\r\n\r\nexport const fetchFarmUserAllowances = async (account: string, farmsToFetch: FarmConfig[]) => {\r\n  const masterChefAddress = getMasterChefAddress()\r\n\r\n  const calls = farmsToFetch.map((farm) => {\r\n    const lpContractAddress = farm.isTokenOnly ? getAddress(farm.token.address) : getAddress(farm.lpAddresses)\r\n    return { address: lpContractAddress, name: 'allowance', params: [account, masterChefAddress] }\r\n  })\r\n\r\n  const rawLpAllowances = await multicall(erc20ABI, calls)\r\n  const parsedLpAllowances = rawLpAllowances.map((lpBalance) => {\r\n    return new BigNumber(lpBalance).toJSON()\r\n  })\r\n  return parsedLpAllowances\r\n}\r\n\r\nexport const fetchFarmUserTokenBalances = async (account: string, farmsToFetch: FarmConfig[]) => {\r\n  const calls = farmsToFetch.map((farm) => {\r\n    const lpContractAddress = farm.isTokenOnly ? getAddress(farm.token.address) : getAddress(farm.lpAddresses)\r\n    return {\r\n      address: farm.isTokenOnly ? getAddress(farm.token.address) : lpContractAddress,\r\n      name: 'balanceOf',\r\n      params: [account],\r\n    }\r\n  })\r\n\r\n  const rawTokenBalances = await multicall(erc20ABI, calls)\r\n  const parsedTokenBalances = rawTokenBalances.map((tokenBalance) => {\r\n    return new BigNumber(tokenBalance).toJSON()\r\n  })\r\n  return parsedTokenBalances\r\n}\r\n\r\nexport const fetchFarmUserStakedBalances = async (account: string, farmsToFetch: FarmConfig[]) => {\r\n  const masterChefAddress = getMasterChefAddress()\r\n\r\n  const calls = farmsToFetch.map((farm) => {\r\n    return {\r\n      address: masterChefAddress,\r\n      name: 'userInfo',\r\n      params: [farm.pid, account],\r\n    }\r\n  })\r\n\r\n  const rawStakedBalances = await multicall(masterchefABI, calls)\r\n  const parsedStakedBalances = rawStakedBalances.map((stakedBalance) => {\r\n    return new BigNumber(stakedBalance[0]._hex).toJSON()\r\n  })\r\n  return parsedStakedBalances\r\n}\r\n\r\nexport const fetchFarmUserEarnings = async (account: string, farmsToFetch: FarmConfig[]) => {\r\n  const masterChefAddress = getMasterChefAddress()\r\n\r\n  const calls = farmsToFetch.map((farm) => {\r\n    return {\r\n      address: masterChefAddress,\r\n      name: 'pendingLOKI',\r\n      params: [farm.pid, account],\r\n    }\r\n  })\r\n\r\n  const rawEarnings = await multicall(masterchefABI, calls)\r\n  const parsedEarnings = rawEarnings.map((earnings) => {\r\n    return new BigNumber(earnings).toJSON()\r\n  })\r\n  return parsedEarnings\r\n}\r\n\r\n// export const fetchFarmUserCanHarvest = async (account: string, farmsToFetch: FarmConfig[]) => {\r\n//   const masterChefAddress = getMasterChefAddress()\r\n\r\n//   const calls = farmsToFetch.map((farm) => {\r\n//     return {\r\n//       address: masterChefAddress,\r\n//       name: 'canHarvest',\r\n//       params: [farm.pid, account],\r\n//     }\r\n//   })\r\n\r\n//   const CanHarvests = await multicall(masterchefABI, calls)\r\n//   const isavailables = CanHarvests.map((CanHarvest) => {\r\n//     return CanHarvest\r\n//   })\r\n//   return isavailables\r\n// }\r\n"]},"metadata":{},"sourceType":"module"}